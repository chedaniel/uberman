/*! Mitsubishi 14-09-2016 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=d||{};d.Boot=function(a){},d.Boot.prototype={preload:function(){},create:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.EXACT_FIT,this.game.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.game.scale.refresh(),this.game.stage.backgroundColor="#000",this.game.world.setBounds(0,0,4267,8192),this.game.state.start("Preloader")},update:function(){},render:function(){}},b.exports=d.Boot},{}],2:[function(a,b,c){var d=d||{};Hero=a("./prefabs/Hero"),Pedestrian=a("./prefabs/Pedestrian"),DayCycle=a("./prefabs/DayCycle"),Car=a("./prefabs/Car"),Hud=a("./prefabs/Hud"),d.Game=function(a){},d.Game.prototype={preload:function(){this.cars_sprites_array=["car","car2"],this.numcars=10,this.numpredestrians=25},randomChoice:function(a){var b=Math.floor(Math.random()*a.length);return a[b]},addGradientBackground:function(){var a=(this.game.add.bitmapData(this.game.world.width,this.game.world.height),this.game.add.bitmapData(this.game.world.width,this.game.world.height)),b=a.context.createLinearGradient(0,0,0,this.game.world.height);return b.addColorStop(0,"black"),b.addColorStop(1,"#85b5e1"),a.context.fillStyle=b,a.context.fillRect(0,0,this.game.world.width,this.game.world.height),b=a.context.createLinearGradient(0,580,0,this.game.world.height),b.addColorStop(0,"black"),b.addColorStop(1,"#85b5e1"),a.context.fillStyle=b,a.context.fillRect(0,this.game.world.height,this.game.world.width,20),this.game.add.sprite(0,0,a)},addBackgroundSprites:function(){this.sunSprite=this.game.add.sprite(this.game.world.width-this.game.world.width/2,this.game.world.height/2,"sun"),this.moonSprite=this.game.add.sprite(this.game.world.width-this.game.world.width/2,this.game.world.height,"moon"),this.orbit=this.game.add.sprite(this.game.world.centerX-2133.5,1835,"orbit"),this.game.fade=this.game.add.sprite(this.game.world.centerX-2133.5,this.game.world.height-3e3,"city_fade"),this.game.back=this.game.add.sprite(this.game.world.centerX-2133.5,this.game.world.height-2100,"city_background"),this.fore=this.game.add.sprite(this.game.world.centerX-2133.5,this.game.world.height-2133,"city_foreground")},animateDayNight:function(a){var b=[{sprite:a,from:2042407,to:11722184},{sprite:this.game.fade,from:2042407,to:11722184},{sprite:this.game.back,from:2042407,to:11722184},{sprite:this.fore,from:3096635,to:9882811}],c=new DayCycle(this.game,3e5);c.initShading(b),c.initSun(this.sunSprite),c.initMoon(this.moonSprite)},addGround:function(){platforms=this.game.add.group(),platforms.enableBody=!0;var a=platforms.create(0,this.game.world.height-209,"ground");a.scale.setTo(2,2),this.game.physics.enable(a),a.body.immovable=!0},addVehicles:function(){this.cars=this.game.add.group();for(var a=0;a<this.numcars;a++){var b=this.randomChoice(this.cars_sprites_array),c=this.randomChoice(this.cars_sprites_array),d=[{LEFT:{x:this.game.world.width+270,y:this.game.world.height-120,car:b}},{RIGHT:{x:this.game.world.x-300,y:this.game.world.height-180,car:c}}],e=this.randomChoice(d);for(var f in e)if(e.hasOwnProperty(f)){var g=new Car(this.game,e[f].x,e[f].y,e[f].car,f);this.cars.add(g)}}this.cars.children=this.cars.children.sort(function(a,b){return b.direction>a.direction?1:a.direction>b.direction?-1:0});for(var h in this.cars.children)this.cars.hasOwnProperty(h)&&this.game.add.existing(h)},create:function(){console.log("GAME");var a=this.addGradientBackground();this.addGround(),this.addBackgroundSprites(),this.animateDayNight(a),this.game.door=this.game.add.sprite(3785,7942,"door"),this.game.physics.arcade.enable(this.game.door),this.game.door.anchor.setTo(.5,.5),this.game.player=new Hero(this.game,this.game.world.centerX,this.game.world.height-260,this.game.world.height/2);for(var b=this.game.add.group(),c=0;c<this.numpredestrians;c++){var d=new Pedestrian(this.game,this.game.world.height-260,"pedestrian");this.game.add.existing(d),b.add(d)}this.game.add.existing(this.game.player),this.addVehicles(),this.game.hud=new Hud(this.game),this.game.add.existing(this.game.hud),cursors=this.game.input.keyboard.createCursorKeys()},update:function(){this.game.physics.arcade.collide(this.game.player,platforms)},render:function(){}},b.exports=d.Game},{"./prefabs/Car":6,"./prefabs/DayCycle":7,"./prefabs/Hero":8,"./prefabs/Hud":9,"./prefabs/Pedestrian":10}],3:[function(a,b,c){var d=d||{};d.MainMenu=function(a){},d.MainMenu.prototype={preload:function(){},gofull:function(){this.game.scale.startFullScreen(!1)},create:function(){console.log("MAINMENU");var a=["Uberman!"];a.push("Start"),a.push("Continue"),a.push("Full Screen");var b=this.game.add.bitmapText(this.game.width/2,this.game.height/2-200,"font",a[0],48);b.anchor.set(.5,.5);var c=this.game.add.bitmapText(this.game.width/2,this.game.height/2-100,"font",a[1],38);c.anchor.set(.5,.5);this.game.add.tween(c.scale).to({x:1.1,y:1.1},350,Phaser.Easing.Linear.InOut,!0,-1,-1,!0).loop(!0);c.inputEnabled=!0;var d=this.game.add.bitmapText(this.game.width/2,this.game.height/2,"font",a[3],38);d.anchor.set(.5,.5),d.inputEnabled=!0,d.events.onInputUp.add(this.gofull,this);var e=this;c.events.onInputUp.add(function(){e.game.add.tween(c.scale).to({x:.8,y:.8},350,Phaser.Easing.Circular.In,!0);var a=e.game.add.tween(c).to({y:-100},350,Phaser.Easing.Circular.In,!0);a.onComplete.add(function(){e.game.state.start("Game")})}),c.events.onInputOver.add(function(){console.log("Hover")})},update:function(){},render:function(){}},b.exports=d.MainMenu},{}],4:[function(a,b,c){var d=d||{};d.Preloader=function(a){},d.Preloader.prototype={preload:function(){this.game.load.bitmapFont("font","font/font.png","font/font.xml"),this.game.load.bitmapFont("smallfont","font/small_font.png","font/small_font.xml"),this.game.load.image("door","images/door.gif",70,80),this.game.load.image("orbit","images/orbit.png",4267,894),this.game.load.image("ground","images/ground.gif",4267,10),this.game.load.image("city_foreground","images/city_foreground.gif",4267,2133),this.game.load.image("city_background","images/city_background.gif",4267,2133),this.game.load.image("city_fade","images/city_fade_background.gif",4267,2133),this.game.load.image("cape_streak","images/cape_streak.png"),this.game.load.image("sun","images/sun.png"),this.game.load.image("moon","images/moon.png"),this.game.load.spritesheet("hero","images/uber_sprite.gif",55,110,28),this.game.load.spritesheet("pedestrian","images/pedestrians.gif",55,110,67),this.game.load.image("car","images/car.gif",300,95),this.game.load.image("car2","images/car2.gif",270,81),this.game.load.image("uber_disk","images/UBER_DISK.png",138,138),this.game.load.image("alter_disk","images/ALTER_DISK.png",138,138)},create:function(){console.log("PRELOADER"),this.game.state.start("Game")},update:function(){},render:function(){}},b.exports=d.Preloader},{}],5:[function(a,b,c){Boot=a("./Boot"),Preloader=a("./Preloader"),MainMenu=a("./MainMenu"),Game=a("./Game");var d={width:window.innerWidth,height:window.innerHeight};!function(a){var b=new Phaser.Game(a.width,a.height,Phaser.AUTO,"");b.state.add("Boot",Boot),b.state.add("Preloader",Preloader),b.state.add("MainMenu",MainMenu),b.state.add("Game",Game),b.state.start("Boot")}(d)},{"./Boot":1,"./Game":2,"./MainMenu":3,"./Preloader":4}],6:[function(a,b,c){Car=function(a,b,c,d,e){Phaser.Sprite.call(this,a,b,c,d,0),this.direction=e,this.game.physics.enable(this,Phaser.Physics.ARCADE),this.car_tween=this.game.add.tween(this),this.driveby=this.game.add.audio("driveby"),this.start(),this.loaded=!1},Car.prototype=Object.create(Phaser.Sprite.prototype),Car.prototype.constructor=Car,Car.prototype.start=function(){var a;"LEFT"==this.direction?(a=this.game.world.x-this.width,this.scale.x=-1):(a=this.game.world.width+this.width,this.scale.x=1),this.car_tween.to({x:a},this.game.rnd.integerInRange(5e3,7e3)).loop(!0),this.car_tween.delay(this.game.rnd.integerInRange(100,1e4)),this.car_tween.start(),this.loaded=!0},Car.prototype.update=function(){this.loaded},b.exports=Car},{}],7:[function(a,b,c){DayCycle=function(a,b){this.game=a,this.dayLength=b,this.shading=!1,this.sunSprite=!1,this.moonSprite=!1},DayCycle.prototype=Object.create(Phaser.Sprite.prototype),DayCycle.prototype.constructor=DayCycle,DayCycle.prototype.initSun=function(a){this.sunSprite=a,this.sunset(a)},DayCycle.prototype.initMoon=function(a){this.moonSprite=a,this.moonrise(a)},DayCycle.prototype.initShading=function(a){this.shading=a},DayCycle.prototype.sunrise=function(a){if(a.position.x=this.game.width-this.game.width/4,this.sunTween=this.game.add.tween(a).to({y:-250},this.dayLength,null,!0),this.sunTween.onComplete.add(this.sunset,this),this.shading){var b=this;this.shading.forEach(function(a){b.tweenTint(a.sprite,a.from,a.to,b.dayLength)})}},DayCycle.prototype.sunset=function(a){if(a.position.x=50,this.sunTween=this.game.add.tween(a).to({y:this.game.world.height},this.dayLength,null,!0),this.sunTween.onComplete.add(this.sunrise,this),this.shading){var b=this;this.shading.forEach(function(a){b.tweenTint(a.sprite,a.to,a.from,b.dayLength)})}},DayCycle.prototype.moonrise=function(a){a.position.x=this.game.width-this.game.width/4,this.moonTween=this.game.add.tween(a).to({y:-350},this.dayLength,null,!0),this.moonTween.onComplete.add(this.moonset,this)},DayCycle.prototype.moonset=function(a){a.position.x=50,this.moonTween=this.game.add.tween(a).to({y:this.game.world.height},this.dayLength,null,!0),this.moonTween.onComplete.add(this.moonrise,this)},DayCycle.prototype.tweenTint=function(a,b,c,d){var e={step:0};this.game.add.tween(e).to({step:100},d,Phaser.Easing.Default,!1).onUpdateCallback(function(){a.tint=Phaser.Color.interpolateColor(b,c,100,e.step,1)}).start()},b.exports=DayCycle},{}],8:[function(a,b,c){Hero=function(a,b,c,d){Phaser.Sprite.call(this,a,b,c,"hero",d),this.originHeight=this.game.world.height,this.isZooming=!1,this.frame=0,this.currentState="uber",this.isClicked=!1,this.sprite_message="",this.pointerHover=!1,this.inputEnabled=!0,this.events.onInputDown.add(this.onSpriteClick,this),this.events.onInputOver.add(this.onSpriteHover,this),this.events.onInputOut.add(this.onSpriteBlur,this),this.zoom_in_on=[],this.followedObject=this.body,this.game.physics.arcade.enable(this),this.directions=["LEFT","UP_LEFT","UP","UP_RIGHT","RIGHT","DOWN_RIGHT","DOWN","DOWN_LEFT"],this.alter_walk=this.animations.add("alter_up",[5],6,!1),this.alter_walk=this.animations.add("alter_fall",[5,6,7,8,9,10],6,!1),this.alter_walk=this.animations.add("alter_walk",[5,6,7,8,9,10],6,!1),this.alter_walk=this.animations.add("alter_stand",[5],6,!1),this.alter_walk=this.animations.add("uber_stand",[0],6,!1),this.alter_walk=this.animations.add("uber_walk",[17,18,19,20,21,22],6,!1),this.alter_walk=this.animations.add("fly_get_ready",[23],1,!0),this.alter_walk=this.animations.add("fly_side",[3,4],6,!1),this.alter_walk=this.animations.add("fly_side_up",[11,12],6,!0),this.alter_walk=this.animations.add("fly_side_down",[13,14],6,!0),this.alter_walk=this.animations.add("fly_hover",[1,2],6,!0),this.alter_walk=this.animations.add("fly_up",[15,16],6,!0),this.alter_walk=this.animations.add("fly_down",[15,16],6,!0),this.alter_walk=this.animations.add("fly_up_diagonal",[3,4],6,!0),this.alter_walk=this.animations.add("fly_down_diagonal",[3,4],6,!0),this.body.gravity.y=300,this.body.collideWorldBounds=!0,this.body.fixedRotation=!0,this.anchor.setTo(.5,.5),this.game.camera.follow(this,Phaser.Camera.FOLLOW_LOCKON,.1,.1)},Hero.prototype=Object.create(Phaser.Sprite.prototype),Hero.prototype.constructor=Hero,Hero.prototype.spriteMessage=function(a,b){if(!this.game.input.activePointer.isDown){this.sprite_message=this.game.add.bitmapText(a.x-2*a.body.width,a.y-a.body.height/2,"smallfont",b,18);this.game.add.tween(this.sprite_message).to({y:a.y-a.body.height/2-10},200,"Linear",!0,-1,-1,!0).loop(!0)}},Hero.prototype.onSpriteHover=function(a,b){if(this.pointerHover=!0,this.checkOverlap(this,this.game.door))this.onDoorHover();else{var c;c="uber"==this.currentState?"[click] Change into Secret Identity!":"[click] Change into Uberman!",this.body.touching.down&&this.spriteMessage(this,c)}},Hero.prototype.onSpriteBlur=function(a,b){this.sprite_message&&this.sprite_message.destroy(),this.pointerHover=!1},Hero.prototype.onDoorClick=function(a){console.log("DOOR CLICKED"),this.zoom_in_on=[a.x,a.y],this.followedObject=a},Hero.prototype.onDoorHover=function(){var a;a="uber"==this.currentState?"[click] Change before entering!":"[click] Enter Daily Planet!",this.spriteMessage(this.game.door,a)},Hero.prototype.onDoorBlur=function(){},Hero.prototype.switch_char=function(a){a.body.touching.down&&(console.log("ON GROUND"),"uber"==a.currentState?(console.log("GOING CLARK"),a.currentState="alter",a.angle=0,a.animations.play("alter_stand")):(console.log("GOING UBER"),a.currentState="uber",a.animations.play("uber_stand")))},Hero.prototype.onSpriteClick=function(a,b){this.sprite_message&&this.sprite_message.destroy(),this.checkOverlap(this,this.game.door)?"uber"!=this.currentState&&this.checkOverlap(this,this.game.door)?this.onDoorClick(this.game.door):(console.log("SWITCHING"),this.switch_char(a)):this.switch_char(a)},Hero.prototype.checkOverlap=function(a,b){var c=a.getBounds(),d=b.getBounds();return Phaser.Rectangle.intersects(c,d)},Hero.prototype.onSpriteRelease=function(a,b){this.isClicked=!1},Hero.prototype.getCardinal=function(a,b){return b?(a=Math.round((a+Math.PI)/(2*Math.PI)*8)%8,this.directions[a]):(a=Math.round((a+Math.PI)/(2*Math.PI)*4)%4,this.directions[2*a])},Hero.prototype.alter_movement=function(a){a&&(this.body.velocity.y=0),this.angle=0,this.body.allowRotation=!1;var b=this.game.input.activePointer;a&&(this.game.back.x-=.001*this.body.velocity.x,b.worldX>this.x&&(this.scale.x=1,this.animations.play("alter_walk")),b.worldX<this.x&&(this.scale.x=-1,this.animations.play("alter_walk")),this.game.physics.arcade.moveToXY(this,b.worldX,this.y,225))},Hero.prototype.uber_movement=function(a){var b=this.game.physics.arcade.moveToPointer(this,60,this.game.input.activePointer,500),c=this.getCardinal(b,!0);switch(this.game.back.x-=.001*this.body.velocity.x,this.game.fade.x-=5e-4*this.body.velocity.x,a||(this.game.back.y-=.001*this.body.velocity.y,this.game.fade.y-=5e-4*this.body.velocity.y),this.scale.y=1,c){case"UP":this.angle=0,a?this.animations.play("uber_stand"):this.animations.play("fly_up");break;case"DOWN":this.angle=0,this.scale.y=-1,a?(this.scale.y=1,this.animations.play("uber_stand")):this.y>this.game.world.height-1200?"fly_down"==this.animations.currentAnim.name?(this.animations.play("fly_get_ready"),this.events.onAnimationComplete.add(function(){this.scale.y=1,this.animations.play("fly_hover")},this)):(this.scale.y=1,this.animations.play("fly_hover")):this.animations.play("fly_down");break;case"UP_LEFT":this.scale.x=-1,a?this.animations.play("uber_stand"):(this.angle=-45,this.animations.play("fly_side_up"));break;case"UP_RIGHT":this.scale.x=1,a?this.animations.play("take_off"):(this.angle=45,this.animations.play("fly_side_up"));break;case"RIGHT":this.scale.x=1,a?(this.angle=0,this.animations.play("uber_walk")):(this.angle=90,this.animations.play("fly_side"));break;case"DOWN_RIGHT":this.scale.x=1,a?(this.angle=0,this.animations.play("uber_walk")):(this.angle=135,this.animations.play("fly_side_down"));break;case"DOWN_LEFT":this.scale.x=-1,a?(this.angle=0,this.animations.play("uber_walk")):(this.angle=-135,this.animations.play("fly_side_down"));break;case"LEFT":this.scale.x=-1,a?(this.angle=0,this.animations.play("uber_walk")):(this.angle=-90,this.animations.play("fly_side"))}},Hero.prototype.isMoving=function(){return Phaser.Point.equals(this.body.velocity,new Phaser.Point(0,0))},Hero.prototype.update=function(){var a,b=this.body.touching.down;this.isZooming||(this.game.input.activePointer.isDown&&(this.pointerHover?this.pointerHover=!1:"uber"==this.currentState?this.uber_movement(b):this.alter_movement(b)),this.game.input.activePointer.isDown||(this.angle=0,this.body.velocity.set(0),a=null,"uber"==this.currentState?(this.scale.y=1,this.animations.play("fly_hover"),b&&this.animations.play("uber_stand")):this.animations.stop()))},Hero.prototype.render=function(){this.game.debug.text(direction||"--",2,14,"#0f0")},b.exports=Hero},{}],9:[function(a,b,c){HUD=function(a,b,c){this.player=a.player,this.bar=a.add.bitmapData(128,20),Phaser.Sprite.call(this,a,0,0,this.bar),this.fixedToCamera=!0,this.cameraOffset.setTo(162,100),this.damage=0,this.uber_disk=this.game.add.sprite(0,0,"uber_disk"),this.uber_disk.anchor.setTo(.5,.5),this.uber_disk.fixedToCamera=!0,this.uber_disk.cameraOffset.setTo(89,89),this.alter_disk=this.game.add.sprite(0,0,"alter_disk"),this.alter_disk.anchor.setTo(.5,.5),this.alter_disk.fixedToCamera=!0,this.alter_disk.cameraOffset.setTo(89,89),this.barProgress=128},HUD.prototype=Object.create(Phaser.Sprite.prototype),HUD.prototype.constructor=HUD,HUD.prototype.preload=function(){this.game.time.advancedTiming=!0},HUD.prototype.switchState=function(){"uber"==this.player.currentState&&(this.game.add.tween(this.alter_disk.scale).to({x:0,y:0},30,Phaser.Easing.Bounce.InOut,!0),this.game.add.tween(this.uber_disk.scale).to({x:1,y:1},30,Phaser.Easing.Bounce.InOut,!0),this.uber_disk.bringToTop()),"alter"==this.player.currentState&&(this.game.add.tween(this.uber_disk.scale).to({x:0,y:0},30,Phaser.Easing.Bounce.InOut,!0),this.game.add.tween(this.alter_disk.scale).to({x:1,y:1},30,Phaser.Easing.Bounce.InOut,!0),this.alter_disk.bringToTop())},HUD.prototype.create=function(){this.game.add.sprite(0,0,this.bar)},HUD.prototype.animateDamage=function(){this.damage>0&&(this.game.add.tween(this).to({barProgress:this.barProgress-this.damage},200,"Linear",!0),this.damage=0)},HUD.prototype.update=function(){this.switchState(),this.bar.context.clearRect(0,0,this.bar.width,this.bar.height),this.barProgress<32?this.bar.context.fillStyle="#f00":this.barProgress<64?this.bar.context.fillStyle="#ff0":this.bar.context.fillStyle="#0f0",this.bar.context.fillRect(0,0,this.barProgress,20),this.bar.dirty=!0,this.animateDamage()},b.exports=HUD},{}],10:[function(a,b,c){Pedestrian=function(a,b,c){Phaser.Sprite.call(this,a,a.rnd.integerInRange(-200,a.world.width+200),b,c,0),this.anchor.setTo(.5,.5),this.goal=a.world.centerX,this.isMoving=!1,this.frame=0,this.frames=[],this.pedestrian_array=["oldman-wait","businessman-wait","delivery-wait","boy-wait","slick-wait","hapgood-wait","foreign-wait"],this.food=this.getRandomRange(0,100),this.warmth=this.getRandomRange(0,100),this.money=this.getRandomRange(0,100),this.water=this.getRandomRange(0,100),this.security=this.getRandomRange(0,100),this.friendship=this.getRandomRange(0,100),this.intimacy=this.getRandomRange(0,100),this.family=this.getRandomRange(0,100),this.confidence=this.getRandomRange(0,100),this.art=this.getRandomRange(0,100),this.education=this.getRandomRange(0,100),this.thoughts={needs:[{maslow:[{need:"WATER",weight:2.4},{need:"FOOD",weight:2.1}],totalWeight:4.5},{maslow:[{need:"SECURITY",weight:1.09},{need:"MONEY",weight:1.08},{need:"WARMTH",weight:1.07}],totalWeight:4.4},{maslow:[{need:"FRIENDSHIP",weight:1.06},{need:"INTIMACY",weight:1.05},{need:"FAMILY",weight:1.04}],totalWeight:2.5},{maslow:[{need:"CONFIDENCE",weight:1.03}],totalWeight:1.03},{maslow:[{need:"ART",weight:1.02},{need:"EDUCATION",weight:1.01}],totalWeight:1.03}],waterBaseWeight:2.4,foodBaseWeight:2.1,securityBaseWeight:1.09,moneyBaseWeight:1.08,warmthBaseWeight:1.07,friendshipBaseWeight:1.06,intimacyBaseWeight:1.05,familyBaseWeight:1.04,confidenceBaseWeight:1.03,artBaseWeight:1.02,educationBaseWeight:1.01},this.direction=this.setDirection(),this.sprite_message="",this.animations.add("oldman-wait",[14],6,!0),this.animations.add("oldman-walk",[0,1,2,3,4,5],6,!0),this.animations.add("businessman-walk",[6,7,8,9],6,!0),this.animations.add("businessman-wait",[10,11,12,13],6,!0),this.animations.add("delivery-wait",[21],6,!0),this.animations.add("delivery-walk",[15,16,17,18,19,20],6,!0),this.animations.add("boy-walk",[22,23,24,25,26,27],6,!0),this.animations.add("boy-wait",[28],6,!0),this.animations.add("slick-walk",[29,30,31,32,33,34,35,36,37],9,!0),this.animations.add("slick-wait",[38],6,!0),this.animations.add("hapgood-walk",[39,40,41,42,43,44,45,46,47,48,49,50],12,!0),this.animations.add("hapgood-wait",[51,52,53,54],6,!0),this.animations.add("foreign-walk",[55,56,57,58,59,60],6,!0),this.animations.add("foreign-wait",[61],6,!0),this.anim=this.randomChoice(this.pedestrian_array),this.check_animation(),this.movement()},Pedestrian.prototype=Object.create(Phaser.Sprite.prototype),Pedestrian.prototype.constructor=Pedestrian,Pedestrian.prototype.spriteMessage=function(a,b){},Pedestrian.prototype.onSpriteHover=function(a,b){},Pedestrian.prototype.getRandomRange=function(a,b){return this.game.rnd.integerInRange(a,b)},Pedestrian.prototype.life=function(){this.food+=.01,this.money-=.01,this.water-=.01,this.security-=.01,this.money-=.01,this.warmth-=.01,this.friendship-=.01,this.intimacy-=.01,this.family-=.01,this.confidence-=.01,this.art-=.01,this.education-=.01;for(var a=0;a<this.thoughts.needs.length;a++)for(var b=this.thoughts.needs[a],c=0;c<b.maslow.length;c++){var d=a+1;"FOOD"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032*this.food+this.thoughts.foodBaseWeight)*d),"WATER"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.water+this.thoughts.waterBaseWeight)*d),"SECURITY"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.security+this.thoughts.securityBaseWeight)*d),"MONEY"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.money+this.thoughts.moneyBaseWeight)*d),"WARMTH"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.warmth+this.thoughts.warmthBaseWeight)*d),"FRIENDSHIP"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.friendship+this.thoughts.friendshipBaseWeight)*d),"INTIMACY"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.intimacy+this.thoughts.intimacyBaseWeight)*d),"FAMILY"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.family+this.thoughts.familyBaseWeight)*d),"CONFIDENCE"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.confidence+this.thoughts.confidenceBaseWeight)*d),"ART"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.art+this.thoughts.artBaseWeight)*d),"EDUCATION"==b.maslow[c].need&&(this.thoughts.needs[a].maslow[c].weight=(.0032/this.education+this.thoughts.educationBaseWeight)*d)}},Pedestrian.prototype.setGoal=function(){for(var a=0;a<this.thoughts.needs.length;a++){for(var b=0,c=0;c<this.thoughts.needs[a].maslow.length;c++)b+=this.thoughts.needs[a].maslow[c].weight;this.thoughts.needs[a].totalWeight=b,this.thoughts.needs[a].maslow.sort(function(a,b){return b.weight-a.weight}),this.thoughts.needs.sort(function(a,b){return b.totalWeight-a.totalWeight})}switch(this.thoughts.needs[0].maslow[0].need){case"WATER":console.log("I'm THIRSTY!!",this.thoughts.needs[0].maslow[0].weight),this.water=100;break;case"SECURITY":console.log("I'm SCARED!!",this.thoughts.needs[0].maslow[0].weight),this.security=100;break;case"FRIENDSHIP":console.log("I NEED FRIENDS!!",this.thoughts.needs[0].maslow[0].weight),this.friendship=100;break;case"INTIMACY":console.log("I'm LONELY!!",this.thoughts.needs[0].maslow[0].weight),this.intimacy=100;break;case"FAMILY":console.log("I HAVE NO SUPPORT!!",this.thoughts.needs[0].maslow[0].weight),this.family=100;break;case"CONFIDENCE":console.log("I'm INSECURE!!",this.thoughts.needs[0].maslow[0].weight),this.confidence=100;break;case"ART":console.log("I'm NOT CREATIVE!!",this.thoughts.needs[0].maslow[0].weight),this.art=100;break;case"EDUCATION":console.log("I'm DUMB!!",this.thoughts.needs[0].maslow[0].weight),this.education=100;break;case"FOOD":console.log("I'm HUNGRY!!",this.thoughts.needs[0].maslow[0].weight),this.food=0;break;case"WARMTH":console.log("I'm COLD!!",this.thoughts.needs[0].maslow[0].weight),this.warmth=100;break;case"MONEY":console.log("I'm BROKE!!",this.thoughts.needs[0].maslow[0].weight),this.money=100}var d=this.randomChoice([[0,this.x+1e3],[0,this.x-1e3]]),e=this.getRandomRange(d[0],d[1]);return this.getRandomRange(e,this.game.world.width-20)},Pedestrian.prototype.setDirection=function(){return this.goal<this.x?"LEFT":"RIGHT"},Pedestrian.prototype.randomChoice=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},Pedestrian.prototype.getSpeed=function(a,b){var c=a+this.game.rnd.integerInRange(100,b);return Math.round(Phaser.Math.distance(this.x,this.y,this.goal,this.y)/c*1e6)},Pedestrian.prototype.Brain=function(){switch(this.anim){case"delivery-walk":this.speed=this.getSpeed(15e3,5e3),this.isMoving=!0;break;case"delivery-wait":this.speed=0,this.isMoving=!1;break;case"businessman-walk":this.speed=this.getSpeed(2e4,2e3),this.isMoving=!0;break;case"businessman-wait":this.speed=0,this.isMoving=!1;break;case"oldman-walk":this.speed=this.getSpeed(4e4,5e3),this.isMoving=!0;break;case"oldman-wait":this.speed=0,this.isMoving=!1;break;case"boy-walk":this.speed=this.getSpeed(15e3,5e3),this.isMoving=!0;break;case"boy-wait":this.speed=0,this.isMoving=!1;break;case"slick-walk":this.speed=this.getSpeed(5e4,5e3),this.isMoving=!0;break;case"slick-wait":this.speed=0,this.isMoving=!1;break;case"hapgood-walk":this.speed=this.getSpeed(7e4,5e3),this.isMoving=!0;break;case"hapgood-wait":this.speed=0,this.isMoving=!1;break;case"foreign-walk":this.speed=this.getSpeed(2e4,5e3),this.isMoving=!0;break;case"foreign-wait":this.speed=0,this.isMoving=!1}},Pedestrian.prototype.check_animation=function(){this.move_tween=this.game.add.tween(this);var a=this.game.rnd.integerInRange(1e3,6e3);this.Brain(),this.isMoving&&this.move_tween.to({x:this.goal},this.speed).delay(a),this.move_tween.start(),this.move_tween.onStart.add(function(){this.isMoving=this.anim.indexOf("-walk")===!0,this.movement()},this),this.move_tween.onComplete.add(function(){this.anim=this.anim.replace("-walk","-wait"),this.movement()},this)},Pedestrian.prototype.movement=function(){this.animations.play(this.anim),"LEFT"==this.direction?this.scale.x=-1:this.scale.x=1,this.loaded=!0},Pedestrian.prototype.update=function(){this.life(),this.x==this.goal&&-1===this.anim.indexOf("-wait")&&(this.isMoving=!1,this.anim=this.anim.replace("-walk","-wait"),this.check_animation()),-1===this.animations.currentAnim.name.indexOf("-walk")&&this.isMoving!==!0&&(this.anim=this.anim.replace("-wait","-walk"),this.goal=this.setGoal(),this.direction=this.setDirection(),this.check_animation(),console.log(this.anim,"CHANGED GOAL",this.speed))},b.exports=Pedestrian},{}]},{},[5]);
//# sourceMappingURL=bundle.min.js.map